<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>
	<ui:composition template="/faces/template/layout/commonLayout.xhtml">
	
		<ui:param name="pageTitle" value="Beállítások"/>
		<ui:param name="pageLink" value="#{userController.getRootUrl()}user/settings"/>

		<ui:define name="content">

			<b:panel collapsible="false">
				<b:form>
					<b:row styleClass="pulledRow">
						<div>
							<h:outputLabel value="Felhasználói adatok" styleClass="tabTitle" />
							<span style="padding-right: 15px; float: right"> <b:commandButton
									value="Szerkesztés" iconAwesome="pencil"
									rendered="#{not userController.edit}"
									action="#{userController.changeEdit()}" look="info" size="md" />
								<b:commandButton value="Mentés" iconAwesome="save"
									rendered="#{userController.edit}"
									action="#{userSettings.saveEdit()}" look="warning" size="md"
									style="margin: 0px 5px 0px 0px" /> <b:commandButton
									value="Vissza" iconAwesome="arrow-left"
									rendered="#{userController.edit}"
									action="#{userSettings.undoEdit()}" look="default" size="md" />
							</span>
						</div>
					</b:row>
					<b:panelGrid colSpans="6,6">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Felhasználónév:" />
							<b:row styleClass="pulledRow">
								<h:outputText value="#{userController.leader.username}"
									rendered="#{not userController.edit}" />
								<b:inputText value="#{userController.leader.username}"
									rendered="#{userController.edit}" />
							</b:row>
							<h:outputLabel value="Jelszó:" />
							<b:commandButton value="Jelszó módosítása" iconAwesome="pencil"
								ajax="true" update="@(.new_password_modal)"
								onclick="ajax:userSettings.setForPasswordModal()"
								oncomplete="$('.new_password_modal').modal();return false;" />
							<h:outputLabel value="Utolsó belépés:" />
							<b:row styleClass="pulledRow">
								<h:outputText value="#{userController.leader.getLastLogin()}" />
							</b:row>
						</b:panelGrid>
					</b:panelGrid>

					<b:modal title="Jelszó megváltoztatása"
						styleClass="new_password_modal" rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Régi jelszó:" />
							<b:inputText value="#{userSettings.oldPassword}" />
							<h:outputLabel value="Új jelszó:" />
							<b:inputText value="#{userSettings.newPassword}" />
							<h:outputLabel value="Új jelszó megint:" />
							<b:inputText value="#{userSettings.newPasswordAgain}" />
						</b:panelGrid>
						<hr style="margin: 10px;" />
						<b:panelGrid colSpans="12">
							<b:row>
								<div align="right" style="padding-right: 10px;">
									<b:button value="Vissza" iconAwesome="arrow-left"
										dismiss="modal" style="margin: 0px 5px;" />
									<b:commandButton value="Módosít" iconAwesome="save" ajax="true"
										update="@(.new_password_modal)"
										onclick="ajax:userSettings.checkPasswords())"
										oncomplete="userSettings.modifyPassword()" />
								</div>
							</b:row>
						</b:panelGrid>
					</b:modal>
				</b:form>
			</b:panel>

		</ui:define>

	</ui:composition>
</h:body>
</html>