<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://tulok.vzma.hu/tags">
<h:head>
	<h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>
	<ui:composition template="/xhtml/patrol/patrolFrame.xhtml">
		<ui:define name="innerContent">

			<b:form>
				<t:pageHeader title="Szülők adatai" saveButton="false"
					undoBean="#{patrolController}" undoMethod="undoEdit" />
					
				<b:tabView pills="true">

					<b:tab title="Anya">
						<b:dataTable value="#{userController.orderScoutSet(patrolController.patrol.scouts)}" var="scout"
							info="false" paginated="false" searching="false"
							scrollHorizontally="true">
							<b:dataTableColumn label="Név">
								<b:link value="#{scout.person.getFullName()}"
									href="#{scout.getScoutUrl()}"
									rendered="#{not userController.edit}" />
								<h:outputText value="#{scout.person.getFullName()}"
									rendered="#{userController.edit}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="" rendered="#{userController.edit}">
								<b:commandButton iconAwesome="pencil" ajax="true"
									update="@(.mother_modal)"
									onclick="ajax:patrolParents.setForMotherModal(scout)"
									oncomplete="$('.mother_modal').modal();return false;" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Anya neve">
								<h:outputText value="#{scout.person.mother.getFullName()}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Email">
								<h:outputText value="#{scout.person.mother.email}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Telefon">
								<h:outputText value="#{scout.person.mother.phone}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Egyéb">
								<h:outputText value="#{scout.person.mother.other}" />
							</b:dataTableColumn>
						</b:dataTable>
						<b:modal
							title="#{patrolController.moddedScout.person.getFullName()} anyukájának szerkesztése"
							styleClass="mother_modal" rendered="#{userController.edit}">
							<b:tabView pills="true" activeIndex="0">
								<b:tab title="Meglévő szerkesztése">
									<br />
									<h:outputLabel value="Válassz a meglévő személyek közül:" />
									<b:selectOneMenu value="#{patrolParents.selectedMother}"
										ajax="true" update="motherInputs">
										<f:selectItems value="#{patrolParents.mothers}" var="item"
											itemLabel="#{item.getFullName()}" itemValue="#{item}" />
									</b:selectOneMenu>
									<b:panelGrid colSpans="2,10" id="motherInputs">
										<h:outputLabel value="Vezetéknév:" />
										<b:inputText value="#{patrolParents.selectedMother.lastname}" />
										<h:outputLabel value="Keresztnév:" />
										<b:inputText value="#{patrolParents.selectedMother.firstname}" />
										<h:outputLabel value="Email:" />
										<b:inputText value="#{patrolParents.selectedMother.email}" />
										<h:outputLabel value="Telefon:" />
										<b:inputText value="#{patrolParents.selectedMother.phone}" />
										<h:outputLabel value="Egyéb:" />
										<b:inputTextarea value="#{patrolParents.selectedMother.other}"
											rows="2" />
									</b:panelGrid>
									<hr style="margin: 10px;" />
									<b:panelGrid colSpans="12">
										<b:row>
											<div align="right" style="padding-right: 10px;">
												<b:commandButton value="Törlés" iconAwesome="trash"
													action="#{patrolParents.deleteParent(patrolController.moddedScout, patrolParents.editedGender)}" />
												<b:button value="Vissza" iconAwesome="arrow-left"
													dismiss="modal" style="margin: 0px 5px;" />
												<b:commandButton value="Módosít" iconAwesome="save"
													action="#{patrolParents.saveParent(patrolController.moddedScout, patrolParents.editedGender, patrolParents.selectedMother)}" />
											</div>
										</b:row>
									</b:panelGrid>
								</b:tab>
								<b:tab title="Új anya létrehozása">
									<br />
									<b:panelGrid colSpans="2,10">
										<h:outputLabel value="Vezetéknév:" />
										<b:inputText value="#{patrolParents.newMother.lastname}" />
										<h:outputLabel value="Keresztnév:" />
										<b:inputText value="#{patrolParents.newMother.firstname}" />
										<h:outputLabel value="Email:" />
										<b:inputText value="#{patrolParents.newMother.email}" />
										<h:outputLabel value="Telefon:" />
										<b:inputText value="#{patrolParents.newMother.phone}" />
										<h:outputLabel value="Egyéb:" />
										<b:inputTextarea value="#{patrolParents.newMother.other}"
											rows="2" />
									</b:panelGrid>
									<hr style="margin: 10px;" />
									<b:panelGrid colSpans="12">
										<b:row>
											<div align="right" style="padding-right: 10px;">
												<b:button value="Vissza" iconAwesome="arrow-left"
													dismiss="modal" style="margin: 0px 5px 0px 0px;" />
												<b:commandButton value="Létrehoz" iconAwesome="save"
													action="#{patrolParents.saveParent(patrolController.moddedScout, patrolParents.editedGender, patrolParents.newMother)}" />
											</div>
										</b:row>
									</b:panelGrid>
								</b:tab>
							</b:tabView>
						</b:modal>
					</b:tab>

					<b:tab title="Apa">
						<b:dataTable value="#{userController.orderScoutSet(patrolController.patrol.scouts)}" var="scout"
							info="false" paginated="false" searching="false"
							scrollHorizontally="true">
							<b:dataTableColumn label="Név">
								<b:link value="#{scout.person.getFullName()}"
									href="#{scout.getScoutUrl()}"
									rendered="#{not userController.edit}" />
								<h:outputText value="#{scout.person.getFullName()}"
									rendered="#{userController.edit}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="" rendered="#{userController.edit}">
								<b:panelGrid colSpans="12">
									<b:commandButton iconAwesome="pencil" ajax="true"
										update="@(.father_modal)"
										onclick="ajax:patrolParents.setForFatherModal(scout)"
										oncomplete="$('.father_modal').modal();return false;" />
								</b:panelGrid>
							</b:dataTableColumn>
							<b:dataTableColumn label="Apa neve">
								<h:outputText value="#{scout.person.father.getFullName()}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Email">
								<h:outputText value="#{scout.person.father.email}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Telefon">
								<h:outputText value="#{scout.person.father.phone}" />
							</b:dataTableColumn>
							<b:dataTableColumn label="Egyéb">
								<h:outputText value="#{scout.person.father.other}" />
							</b:dataTableColumn>
						</b:dataTable>
						<b:modal
							title="#{patrolController.moddedScout.person.getFullName()} apukájának szerkesztése"
							styleClass="father_modal" rendered="#{userController.edit}">
							<b:tabView pills="true" activeIndex="0">
								<b:tab title="Meglévő szerkesztése">
									<br />
									<h:outputLabel value="Válassz a meglévő személyek közül:" />
									<b:selectOneMenu value="#{patrolParents.selectedFather}"
										ajax="true" update="parentInputs">
										<f:selectItems value="#{patrolParents.fathers}" var="item"
											itemLabel="#{item.getFullName()}" itemValue="#{item}" />
									</b:selectOneMenu>
									<b:panelGrid colSpans="2,10" id="parentInputs">
										<h:outputLabel value="Vezetéknév:" />
										<b:inputText value="#{patrolParents.selectedFather.lastname}" />
										<h:outputLabel value="Keresztnév:" />
										<b:inputText value="#{patrolParents.selectedFather.firstname}" />
										<h:outputLabel value="Email:" />
										<b:inputText value="#{patrolParents.selectedFather.email}" />
										<h:outputLabel value="Telefon:" />
										<b:inputText value="#{patrolParents.selectedFather.phone}" />
										<h:outputLabel value="Egyéb:" />
										<b:inputTextarea value="#{patrolParents.selectedFather.other}"
											rows="2" />
									</b:panelGrid>
									<hr style="margin: 10px;" />
									<b:panelGrid colSpans="12">
										<b:row>
											<div align="right" style="padding-right: 10px;">
												<b:commandButton value="Törlés" iconAwesome="trash"
													action="#{patrolParents.deleteParent(patrolController.moddedScout, patrolParents.editedGender)}" />
												<b:button value="Vissza" iconAwesome="arrow-left"
													dismiss="modal" style="margin: 0px 5px;" />
												<b:commandButton value="Módosít" iconAwesome="save"
													action="#{patrolParents.saveParent(patrolController.moddedScout, patrolParents.editedGender, patrolParents.selectedFather)}" />
											</div>
										</b:row>
									</b:panelGrid>
								</b:tab>
								<b:tab title="Új apa létrehozása">
									<br />
									<b:panelGrid colSpans="2,10">
										<h:outputLabel value="Vezetéknév:" />
										<b:inputText value="#{patrolParents.newFather.lastname}" />
										<h:outputLabel value="Keresztnév:" />
										<b:inputText value="#{patrolParents.newFather.firstname}" />
										<h:outputLabel value="Email:" />
										<b:inputText value="#{patrolParents.newFather.email}" />
										<h:outputLabel value="Telefon:" />
										<b:inputText value="#{patrolParents.newFather.phone}" />
										<h:outputLabel value="Egyéb:" />
										<b:inputTextarea value="#{patrolParents.newFather.other}"
											rows="2" />
									</b:panelGrid>
									<hr style="margin: 10px;" />
									<b:panelGrid colSpans="12">
										<b:row>
											<div align="right" style="padding-right: 10px;">
												<b:button value="Vissza" iconAwesome="arrow-left"
													dismiss="modal" style="margin: 0px 5px 0px 0px;" />
												<b:commandButton value="Létrehoz" iconAwesome="save"
													action="#{patrolParents.saveParent(patrolController.moddedScout, patrolParents.editedGender, patrolParents.newFather)}" />
											</div>
										</b:row>
									</b:panelGrid>
								</b:tab>
							</b:tabView>
						</b:modal>
					</b:tab>

				</b:tabView>
			</b:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>