<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://tulok.vzma.hu/tags">
<h:head>
	<h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>
	<ui:composition template="/xhtml/profile/profileFrame.xhtml">
		<ui:define name="innerContent">

			<b:form>
				<t:pageHeader title="Cserkész adatok" saveBean="#{profileScout}"
					saveMethod="saveEdit" undoBean="#{profileController}"
					undoMethod="undoEdit" />
				<t:table>
					<t:rowWithLabel label="ECSET-kód">
						<t:textField value="#{profileController.scout.ecsetcode}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Aktivitás">
						<t:dropdown list="#{enums.statuses}"
							value="#{profileController.scout.status}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Belépés ideje">
						<t:datepicker value="#{profileController.scout.joindate}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Kilépés ideje">
						<t:datepicker value="#{profileController.scout.leavedate}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Tagkártya">
						<t:dropdown list="#{enums.cards}"
							value="#{profileController.scout.scoutcard}" />
					</t:rowWithLabel>
				</t:table>
				<br />
				<b:panelGrid colSpans="12">
					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Fogadalmak" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.promise_modal)"
							onclick="ajax:promiseBean.setForNewModal(profileController.scout)"
							oncomplete="$('.promise_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.promiseList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-left:5px" ajax="true" update="@(.promise_modal)"
									onclick="ajax:promiseBean.setForEditModal(item)"
									oncomplete="$('.promise_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>
					<t:promiseModal />

					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Képesítések" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.new_qualification_modal)"
							onclick="ajax:profileScout.setForNewQualificationModal(profileController.scout)"
							oncomplete="$('.new_qualification_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.qualificationList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-left:5px" ajax="true"
									update="@(.edit_qualification_modal)"
									onclick="ajax:profileScout.setForEditQualificationModal(item)"
									oncomplete="$('.edit_qualification_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>

					<b:modal
						title="#{profileScout.selectedQualification.type.label} képesítés szerkesztése"
						styleClass="edit_qualification_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="VK" />
							<b:inputText value="#{profileScout.selectedQualification.course}"
								placeholder="pl. ŐVK2012 PUF" />
							<h:outputLabel value="Dátum" />
							<t:datepicker value="#{profileScout.selectedQualification.date}" />
							<h:outputLabel value="Helyszín" />
							<b:inputText value="#{profileScout.selectedQualification.place}" />
						</b:panelGrid>
						<t:modalFooter mode="modify"
							action="#{profileScout.saveQualification(profileScout.selectedQualification)}"
							deleteAction="#{profileScout.deleteQualification(profileScout.selectedQualification)}" />
					</b:modal>

					<b:modal title="Új képesítés" styleClass="new_qualification_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Típus" />
							<t:dropdown list="#{enums.qualifications}"
								value="#{profileScout.newQualification.type}" />
							<h:outputLabel value="VK" />
							<b:inputText value="#{profileScout.newQualification.course}"
								placeholder="pl. ŐVK2012 PUF" />
							<h:outputLabel value="Dátum" />
							<t:datepicker value="#{profileScout.newQualification.date}" />
							<h:outputLabel value="Helyszín" />
							<b:inputText value="#{profileScout.newQualification.place}" />
						</b:panelGrid>
						<t:modalFooter mode="create"
							action="#{profileScout.saveQualification(profileScout.newQualification)}" />
					</b:modal>

					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Próbák" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.new_challenge_modal)"
							onclick="ajax:profileScout.setForNewChallengeModal(profileController.scout)"
							oncomplete="$('.new_challenge_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.challengeList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-left:5px" ajax="true"
									update="@(.edit_challenge_modal)"
									onclick="ajax:profileScout.setForEditChallengeModal(item)"
									oncomplete="$('.edit_challenge_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>

					<b:modal
						title="#{profileScout.selectedChallenge.type.label} próba szerkesztése"
						styleClass="edit_challenge_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Dátum" />
							<t:datepicker value="#{profileScout.selectedChallenge.date}" />
							<h:outputLabel value="Helyszín" />
							<b:inputText value="#{profileScout.selectedChallenge.place}" />
						</b:panelGrid>
						<t:modalFooter mode="modify"
							action="#{profileScout.saveChallenge(profileScout.selectedChallenge)}"
							deleteAction="#{profileScout.deleteChallenge(profileScout.selectedChallenge)}" />
					</b:modal>

					<b:modal title="Új próba" styleClass="new_challenge_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Típus" />
							<t:dropdown list="#{enums.challenges}"
								value="#{profileScout.newChallenge.type}" />
							<h:outputLabel value="Dátum" />
							<t:datepicker value="#{profileScout.newChallenge.date}" />
							<h:outputLabel value="Helyszín" />
							<b:inputText value="#{profileScout.newChallenge.place}" />
						</b:panelGrid>
						<t:modalFooter mode="create"
							action="#{profileScout.saveChallenge(profileScout.newChallenge)}" />
					</b:modal>
				</b:panelGrid>
			</b:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>