<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://tulok.vzma.hu/tags">
<h:head>
	<h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>
	<ui:composition template="/xhtml/profile/profileFrame.xhtml">
		<ui:define name="innerContent">

			<b:form>
				<t:pageHeader title="Cserkész adatok" saveBean="#{profileScout}"
					saveMethod="saveEdit" undoBean="#{profileController}"
					undoMethod="undoEdit" />
				<t:table>
					<t:rowWithLabel label="ECSET-kód">
						<t:textField value="#{profileController.scout.ecsetcode}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Aktivitás">
						<t:dropdown list="#{enums.statuses}"
							value="#{profileController.scout.status}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Belépés ideje">
						<t:datepicker value="#{profileController.scout.joindate}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Kilépés ideje">
						<t:datepicker value="#{profileController.scout.leavedate}" />
					</t:rowWithLabel>
					<t:rowWithLabel label="Tagkártya">
						<t:dropdown list="#{enums.cards}"
							value="#{profileController.scout.scoutcard}" />
					</t:rowWithLabel>
				</t:table>
				<br />
				<b:panelGrid colSpans="12">
					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Fogadalmak" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.promise_modal)"
							onclick="ajax:promiseBean.setForNewModal(profileController.scout)"
							oncomplete="$('.promise_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.promiseList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-right:5px" ajax="true" update="@(.promise_modal)"
									onclick="ajax:promiseBean.setForEditModal(item)"
									oncomplete="$('.promise_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>
					<t:promiseModal />

					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Képesítések" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.new_qualification_modal)"
							onclick="ajax:profileScout.setForNewQualificationModal(profileController.scout)"
							oncomplete="$('.new_qualification_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.qualificationList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-right:5px" ajax="true"
									update="@(.edit_qualification_modal)"
									onclick="ajax:profileScout.setForEditQualificationModal(item)"
									oncomplete="$('.edit_qualification_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>
					<b:modal
						title="#{profileScout.selectedQualification.type.label} képesítés szerkesztése"
						styleClass="edit_qualification_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="VK:" />
							<b:inputText value="#{profileScout.selectedQualification.course}"
								placeholder="pl. ŐVK2012 PUF" />
							<h:outputLabel value="Dátum:" />
							<b:datepicker value="#{profileScout.selectedQualification.date}"
								mode="popup-icon" changeMonth="true" changeYear="true" />
							<h:outputLabel value="Helyszín:" />
							<b:inputText value="#{profileScout.selectedQualification.place}" />
						</b:panelGrid>
						<b:panelGrid colSpans="12">
							<hr style="margin: 10px;" />
							<b:row>
								<div align="right" style="padding-right: 10px;">
									<b:commandButton value="Törlés" iconAwesome="trash"
										action="#{profileScout.deleteQualification(profileScout.selectedQualification)}" />
									<b:button value="Vissza" iconAwesome="arrow-left"
										dismiss="modal" style="margin: 0px 5px;" />
									<b:commandButton value="Módosít" iconAwesome="save"
										action="#{profileScout.saveQualification(profileScout.selectedQualification)}" />
								</div>
							</b:row>
						</b:panelGrid>
					</b:modal>
					<b:modal title="Új képesítés" styleClass="new_qualification_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Típus:" />
							<b:selectOneMenu value="#{profileScout.newQualification.type}">
								<f:selectItems value="#{enums.qualifications}"
									var="qualification" itemValue="#{qualification}"
									itemLabel="#{qualification.label}" />
							</b:selectOneMenu>
							<h:outputLabel value="VK:" />
							<b:inputText value="#{profileScout.newQualification.course}"
								placeholder="pl. ŐVK2012 PUF" />
							<h:outputLabel value="Dátum:" />
							<b:datepicker value="#{profileScout.newQualification.date}"
								mode="popup-icon" changeMonth="true" changeYear="true" />
							<h:outputLabel value="Helyszín:" />
							<b:inputText value="#{profileScout.newQualification.place}" />
						</b:panelGrid>
						<b:panelGrid colSpans="12">
							<hr style="margin: 10px;" />
							<b:row>
								<div align="right" style="padding-right: 10px;">
									<b:button value="Vissza" iconAwesome="arrow-left"
										dismiss="modal" style="margin: 0px 5px;" />
									<b:commandButton value="Létrehoz" iconAwesome="save"
										action="#{profileScout.saveQualification(profileScout.newQualification)}" />
								</div>
							</b:row>
						</b:panelGrid>
					</b:modal>
					<br />
					<b:row styleClass="pulledRow">
						<h:outputText value="Próbák" styleClass="subTitle" />
						<b:commandButton value="Új" iconAwesome="plus" size="md"
							ajax="true" update="@(.new_challenge_modal)"
							onclick="ajax:profileScout.setForNewChallengeModal(profileController.scout)"
							oncomplete="$('.new_challenge_modal').modal();return false;"
							rendered="#{userController.edit}" />
					</b:row>
					<t:table>
						<ui:repeat var="item" value="#{profileScout.challengeList}">
							<t:row>
								<h:outputText value="#{item.getFullInfo()}"
									style="padding-left:20px;" />
								<b:commandButton iconAwesome="pencil" size="xs"
									style="margin-right:5px" ajax="true"
									update="@(.edit_challenge_modal)"
									onclick="ajax:profileScout.setForEditChallengeModal(item)"
									oncomplete="$('.edit_challenge_modal').modal();return false;"
									rendered="#{userController.edit}" />
							</t:row>
						</ui:repeat>
					</t:table>
					<b:modal
						title="#{profileScout.selectedChallenge.type.label} próba szerkesztése"
						styleClass="edit_challenge_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Dátum:" />
							<b:datepicker value="#{profileScout.selectedChallenge.date}"
								mode="popup-icon" changeMonth="true" changeYear="true" />
							<h:outputLabel value="Helyszín:" />
							<b:inputText value="#{profileScout.selectedChallenge.place}" />
						</b:panelGrid>
						<b:panelGrid colSpans="12">
							<hr style="margin: 10px;" />
							<b:row>
								<div align="right" style="padding-right: 10px;">
									<b:commandButton value="Törlés" iconAwesome="trash"
										action="#{profileScout.deleteChallenge(profileScout.selectedChallenge)}" />
									<b:button value="Vissza" iconAwesome="arrow-left"
										dismiss="modal" style="margin: 0px 5px;" />
									<b:commandButton value="Módosít" iconAwesome="save"
										action="#{profileScout.saveChallenge(profileScout.selectedChallenge)}" />
								</div>
							</b:row>
						</b:panelGrid>
					</b:modal>
					<b:modal title="Új próba" styleClass="new_challenge_modal"
						rendered="#{userController.edit}">
						<b:panelGrid colSpans="4,8">
							<h:outputLabel value="Típus:" />
							<b:selectOneMenu value="#{profileScout.newChallenge.type}">
								<f:selectItems value="#{enums.challenges}" var="challenge"
									itemValue="#{challenge}" itemLabel="#{challenge.label}" />
							</b:selectOneMenu>
							<h:outputLabel value="Dátum:" />
							<b:datepicker value="#{profileScout.newChallenge.date}"
								mode="popup-icon" changeMonth="true" changeYear="true" />
							<h:outputLabel value="Helyszín:" />
							<b:inputText value="#{profileScout.newChallenge.place}" />
						</b:panelGrid>
						<b:panelGrid colSpans="12">
							<hr style="margin: 10px;" />
							<b:row>
								<div align="right" style="padding-right: 10px;">
									<b:button value="Vissza" iconAwesome="arrow-left"
										dismiss="modal" style="margin: 0px 5px;" />
									<b:commandButton value="Létrehoz" iconAwesome="save"
										action="#{profileScout.saveChallenge(profileScout.newChallenge)}" />
								</div>
							</b:row>
						</b:panelGrid>
					</b:modal>
				</b:panelGrid>
			</b:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>