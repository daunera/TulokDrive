<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://tulok.vzma.hu/tags">
<h:head>
	<h:outputStylesheet name="css/styles.css" />
</h:head>
<h:body>
	<ui:composition template="/xhtml/layout/commonLayout.xhtml">

		<ui:param name="pageTitle" value="Cserkészing kölcsönzés" />
		<ui:param name="pageLink"
			value="#{userController.getRootUrl()}uniforms" />

		<ui:define name="content">

			<b:panel collapsible="false">
				<b:form>
					<t:pageHeader title="Cserkészing kölcsönzés"
						undoBean="#{userController}" undoMethod="changeEdit" />
					<b:tabView pills="true">
						<b:tab title="Aktív kölcsönzések">
							<t:dataTable value="#{uniformController.activeRents}">
								<b:dataTableColumn label="Név" style="width:20%;">
									<t:entityLink entity="#{item.scout}" edit="#{not userController.leader.god}" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Őrs" style="width:13%;">
									<ui:repeat var="patrol"
										value="#{utils.orderPatrolSet(item.scout.patrols)}"
										varStatus="var">
										<t:entityLink entity="#{patrol}" mode="patrol" edit="#{not userController.leader.god}" />
										<h:outputText value=", " rendered="#{not var.last}" />
									</ui:repeat>
								</b:dataTableColumn>

								<b:dataTableColumn label="Kezdete">
									<t:datepicker value="#{item.begindate}" showIcon="false" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Méret">
									<t:dropdown list="#{enums.sizes}" value="#{item.uniformsize}" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Pénz">
									<t:textField value="#{item.price}" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Visszavétel">
									<h:outputText value="#{item.getPlannedReturnDate()}">
										<f:convertDateTime pattern="yyyy.MM.dd" />
									</h:outputText>
								</b:dataTableColumn>
								<b:dataTableColumn label="Most visszajár">
									<h:outputText value="#{item.getActualReturnPrice()}" />
								</b:dataTableColumn>
							</t:dataTable>
						</b:tab>
						<b:tab title="Visszahozott ingek">
							<t:dataTable value="#{uniformController.returnedRents}">
								<b:dataTableColumn label="Név">
									<t:entityLink entity="#{item.scout}" edit="#{not userController.leader.god}" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Őrs" style="width:13%;">
									<ui:repeat var="patrol"
										value="#{utils.orderPatrolSet(item.scout.patrols)}"
										varStatus="var">
										<t:entityLink entity="#{patrol}" mode="patrol" edit="#{not userController.leader.god}" />
										<h:outputText value=", " rendered="#{not var.last}" />
									</ui:repeat>
								</b:dataTableColumn>
								<b:dataTableColumn label="Kezdete">
									<t:datepicker value="#{item.begindate}" showIcon="false" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Méret">
									<t:dropdown list="#{enums.sizes}" value="#{item.uniformsize}" />
								</b:dataTableColumn>
								<b:dataTableColumn label="Visszavéve">
									<h:outputText value="#{item.getReturndate()}">
										<f:convertDateTime pattern="yyyy.MM.dd" />
									</h:outputText>
								</b:dataTableColumn>
							</t:dataTable>
						</b:tab>
					</b:tabView>
				</b:form>
			</b:panel>

		</ui:define>

	</ui:composition>
</h:body>
</html>